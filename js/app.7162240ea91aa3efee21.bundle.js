(self.webpackChunk=self.webpackChunk||[]).push([[524],{44:(e,t,n)=>{const a=n(377),{lightningChart:s,PalettedFill:r,LUT:i,emptyLine:o,AxisScrollStrategies:c,AxisTickStrategies:l,regularColorSteps:d,Themes:u}=a,h=new(window.AudioContext||window.webkitAudioContext),m=4096,y=2048,p=s({resourcesBaseUrl:new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+"resources/"}),g=(e,t,n)=>{const a=Array.from(e),s=Array.from(Array(t)).map((()=>Array.from(Array(n))));for(let e=0;e<t;e+=1)for(let r=0;r<n;r+=1)s[e][r]=a[r*t+e];return s},f=(e,t,n,a,s,l,u,h)=>{const m=e.getTheme(),y={x:0,y:0},p={x:l,y:Math.ceil(s/2)},g=e.addAxisY({iStack:1-t}).setMargins(t<1?15:0,t>0?15:0),f=e.addHeatmapGridSeries({yAxis:g,columns:a,rows:Math.ceil(n/2),dataOrder:"rows",heatmapDataType:"intensity"}).setStart(y).setEnd(p).setFillStyle(new r({lut:new i({steps:d(0,255,m.examples.spectrogramColorPalette,{formatLabels:e=>{return`${Math.round((t=e,u+t/255*(h-u)))}`;var t}}),units:"dB",interpolate:!0})})).setWireframeStyle(o);return g.setInterval({start:y.y,end:p.y,stopAxisAfter:!1}).setTitle(`Channel ${t+1}`).setUnits("Hz").setScrollStrategy(c.fitting),{series:f,yAxis:g}};(async()=>{document.querySelectorAll(".loading").forEach((e=>{e.parentElement.removeChild(e)}));const e=async()=>{const e=await(async e=>{const t=await fetch(e),n=await t.arrayBuffer();return await h.decodeAudioData(n)})(new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+"examples/assets/0802/Truck_driving_by-Jason_Baker-2112866529_edit.wav");(async e=>{const t=p.ChartXY({theme:u[new URLSearchParams(window.location.search).get("theme")||"darkGold"]||void 0}).setTitle("Spectrogram chart 2 channels").setCursorMode("show-nearest");t.getDefaultAxisX().setTickStrategy(l.Numeric).setScrollStrategy(c.fitting).setTitle("Duration").setUnits("s"),t.getDefaultAxisY().dispose();for(let n=0;n<e.channels.length;n+=1){const a=f(t,n,e.stride,e.tickCount,e.maxFreq,e.duration,e.channelDbRanges[n].minDecibels,e.channelDbRanges[n].maxDecibels),s=g(e.channels[n],e.stride,e.tickCount).slice(0,e.stride/2);a.series.invalidateIntensityValues({iRow:0,iColumn:0,values:s})}t.addLegendBox().add(t).setAutoDispose({type:"max-width",maxWidth:.3})})(await(async e=>{const t=new OfflineAudioContext(e.numberOfChannels,e.length,e.sampleRate),n=t.createBufferSource();n.buffer=e,n.channelCount=e.numberOfChannels;const a=t.createChannelSplitter(n.channelCount),s=t.createAnalyser();s.fftSize=m,s.smoothingTimeConstant=.1;const r=[],i=[],o=[];for(let s=0;s<n.channelCount;s+=1)r[s]=new Uint8Array(e.length/y*2048),o[s]=t.createAnalyser(),o[s].smoothingTimeConstant=.1,o[s].fftSize=m,a.connect(o[s],s),i.push({minDecibels:o[s].minDecibels,maxDecibels:o[s].maxDecibels});t.createScriptProcessor=t.createScriptProcessor||t.createJavaScriptNode;const c=t.createScriptProcessor(y,1,1);let l=0;return c.onaudioprocess=e=>{for(let e=0;e<n.channelCount;e+=1){const t=new Uint8Array(r[e].buffer,l,o[e].frequencyBinCount);o[e].getByteFrequencyData(t)}l+=s.frequencyBinCount},n.connect(a),n.connect(c),c.connect(t.destination),n.connect(s),n.start(0),await t.startRendering(),{channels:r,channelDbRanges:i,stride:2048,tickCount:Math.ceil(e.length/y),maxFreq:t.sampleRate/2,duration:e.duration}})(e))};if("suspended"===h.state){const t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.right="0",t.style.bottom="0";const n=document.createElement("img");n.crossOrigin="",n.src=new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+"examples/assets/0802/play_circle_outline-24px.svg",n.style.width="100%",n.style.height="100%",t.onclick=()=>{h.resume()},t.appendChild(n);const a=document.querySelector(".chart");let s;a||(s=document.createElement("div"),s.classList.add("inner"),document.body.appendChild(s));const r=a||s;r.appendChild(t),h.onstatechange=()=>{"running"===h.state&&(e(),h.onstatechange=void 0,r.removeChild(t))}}else e()})()}},e=>{e.O(0,[502],(()=>e(e.s=44))),e.O()}]);