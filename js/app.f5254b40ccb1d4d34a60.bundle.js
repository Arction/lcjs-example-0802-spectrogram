(self.webpackChunk=self.webpackChunk||[]).push([[524],{44:(e,t,n)=>{const a=n(89),{lightningChart:s,PalettedFill:r,LUT:o,emptyLine:i,AxisScrollStrategies:c,AxisTickStrategies:l,regularColorSteps:d,Themes:u}=a,m=new(window.AudioContext||window.webkitAudioContext),h=4096,y=2048,p=s({resourcesBaseUrl:new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+"resources/"}),g=(e,t,n)=>{const a=Array.from(e),s=Array.from(Array(t)).map((()=>Array.from(Array(n))));for(let e=0;e<t;e+=1)for(let r=0;r<n;r+=1)s[e][r]=a[r*t+e];return s},f=(e,t,n,a,s,l,u,m)=>{const h=e.getTheme(),y=e=>u+e/255*(m-u),p={x:0,y:0},g={x:l,y:Math.ceil(s/2)},f=e.addAxisY({iStack:1-t}).setMargins(t<1?15:0,t>0?15:0),w=e.addHeatmapGridSeries({yAxis:f,columns:a,rows:Math.ceil(n/2),start:p,end:g,dataOrder:"rows",heatmapDataType:"intensity"}).setFillStyle(new r({lut:new o({steps:d(0,255,h.examples.spectrogramColorPalette,{formatLabels:e=>`${Math.round(y(e))}`}),units:"dB",interpolate:!0})})).setWireframeStyle(i).setCursorResultTableFormatter(((e,t,n)=>e.addRow(t.getName()).addRow("X:","",t.axisX.formatValue(n.x)).addRow("Y:","",t.axisY.formatValue(n.y)).addRow("",y(n.intensity).toFixed(1)+" dB")));return f.setInterval({start:p.y,end:g.y,stopAxisAfter:!1}).setTitle(`Channel ${t+1} (Hz)`).setScrollStrategy(c.fitting),{series:w,yAxis:f}};(async()=>{document.querySelectorAll(".loading").forEach((e=>{e.parentElement.removeChild(e)}));const e=async()=>{const e=await(async e=>{const t=await fetch(e),n=await t.arrayBuffer();return await m.decodeAudioData(n)})(new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+"examples/assets/0802/Truck_driving_by-Jason_Baker-2112866529_edit.wav");(async e=>{const t=p.ChartXY({theme:u[new URLSearchParams(window.location.search).get("theme")||"darkGold"]||void 0}).setTitle("Spectrogram chart 2 channels");t.getDefaultAxisX().setTickStrategy(l.Numeric).setScrollStrategy(c.fitting).setTitle("Duration (s)"),t.getDefaultAxisY().dispose();for(let n=0;n<e.channels.length;n+=1){const a=f(t,n,e.stride,e.tickCount,e.maxFreq,e.duration,e.channelDbRanges[n].minDecibels,e.channelDbRanges[n].maxDecibels),s=g(e.channels[n],e.stride,e.tickCount).slice(0,e.stride/2);a.series.invalidateIntensityValues({iRow:0,iColumn:0,values:s})}t.addLegendBox().add(t).setAutoDispose({type:"max-width",maxWidth:.3})})(await(async e=>{const t=new OfflineAudioContext(e.numberOfChannels,e.length,e.sampleRate),n=t.createBufferSource();n.buffer=e,n.channelCount=e.numberOfChannels;const a=t.createChannelSplitter(n.channelCount),s=t.createAnalyser();s.fftSize=h,s.smoothingTimeConstant=.1;const r=[],o=[],i=[];for(let s=0;s<n.channelCount;s+=1)r[s]=new Uint8Array(e.length/y*2048),i[s]=t.createAnalyser(),i[s].smoothingTimeConstant=.1,i[s].fftSize=h,a.connect(i[s],s),o.push({minDecibels:i[s].minDecibels,maxDecibels:i[s].maxDecibels});t.createScriptProcessor=t.createScriptProcessor||t.createJavaScriptNode;const c=t.createScriptProcessor(y,1,1);let l=0;return c.onaudioprocess=e=>{for(let e=0;e<n.channelCount;e+=1){const t=new Uint8Array(r[e].buffer,l,i[e].frequencyBinCount);i[e].getByteFrequencyData(t)}l+=s.frequencyBinCount},n.connect(a),n.connect(c),c.connect(t.destination),n.connect(s),n.start(0),await t.startRendering(),{channels:r,channelDbRanges:o,stride:2048,tickCount:Math.ceil(e.length/y),maxFreq:t.sampleRate/2,duration:e.duration}})(e))};if("suspended"===m.state){const t=document.createElement("div");t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.right="0",t.style.bottom="0";const n=document.createElement("img");n.crossOrigin="",n.src=new URL(document.head.baseURI).origin+new URL(document.head.baseURI).pathname+"examples/assets/0802/play_circle_outline-24px.svg",n.style.width="100%",n.style.height="100%",t.onclick=()=>{m.resume()},t.appendChild(n);const a=document.querySelector(".chart");let s;a||(s=document.createElement("div"),s.classList.add("inner"),document.body.appendChild(s));const r=a||s;r.appendChild(t),m.onstatechange=()=>{"running"===m.state&&(e(),m.onstatechange=void 0,r.removeChild(t))}}else e()})()}},e=>{e.O(0,[502],(()=>(44,e(e.s=44)))),e.O()}]);